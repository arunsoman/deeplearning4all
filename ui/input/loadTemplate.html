<script>
window.customElements.define('load-template' ,class extends HTMLElement {
  constructor() {
    super();
    this.template = document.createElement('template');
    this.template.innerHTML = `
      <button
        id="button"
        type="button">Click Me Dummy!</button>
    `
    this.attachShadow({mode: 'open'});
    let _ = this;

    this.loadBlocks = function (toggle, config) {
        console.log(config)
        let xml_texts = [
          `<xml xmlns="http://www.w3.org/1999/xhtml"><variables><variable type="" id="a#v@N!10;Y3vwEbQpO|E">model1</variable><variable type="" id=".90!~a@Z_,Mh.h1a;vRW">shape1</variable><variable type="" id="H_hXcN*BYLQc:cUVolu2">train1</variable></variables><block type="program" id="C;ToC*@B+}t1.YqJl3x?" x="585" y="-143"><statement name="operation"><block type="variables_set" id=",s42Aomu;O$t9h^m|L$j"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field><value name="VALUE"><block type="supervised_models" id="?EuwhDXHX?|TW!(=d,dV"><field name="type">SVM Regression</field><field name="shape">2,2</field><value name="Config"><block type="text" id="\`d)*Q=S??z;$!CkZ\`hcr"><field name="TEXT"></field></block></value></block></value><next><block type="variables_set" id="6Japhuq;O[^-2,yDuk\`9"><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field><value name="VALUE"><block type="shaper" id="Ui@l9w.1*z,PpP)wEegA"><field name="input columns">*</field><field name="xdimension">1</field><field name="output columns">-1</field><field name="ydimension">1</field><field name="yoffset">0</field><field name="test data">20</field><value name="shaper_xinput_csv"><block type="csv_reader" id="Dwpnj%vfUw-a#KbA[E;M"><field name="url">ftp://</field><field name="uri">/</field><field name="config">default</field><field name="streamType">csv</field><field name="columns"></field><value name="Transformers"><block type="lists_create_with" id="eCgII5R?P0jK0EtRf3kO"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="MF]I/ivecMQra]m^5NED"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value><value name="shaper_yinput_csv"><block type="csv_reader" id="a3ZNg9k5?sqOB9AQBF;L"><field name="url">ftp://</field><field name="uri">/</field><field name="config">default</field><field name="streamType">csv</field><field name="columns"></field><value name="Transformers"><block type="lists_create_with" id="N/%jc:?R^+lW7lZ?1wMs"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="\`1=[~_o5,JB2Rhr3n\`Ek"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value></block></value><next><block type="variables_set" id="4HWUZ(\`!+xJ!m0A,I+l1"><field name="VAR" id="H_hXcN*BYLQc:cUVolu2" variabletype="">train1</field><value name="VALUE"><block type="train" id="W6^KH\`99ZJt6(OxE!Bc["><field name="show result">TRUE</field><value name="Model"><block type="variables_get" id="ZCa;xzoZp4~i;Ic|kkA:"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field></block></value><value name="shaper"><block type="norm" id="Ct]}$jcNDLGBFlcZ?31L"><value name="data"><block type="variables_get" id="Gu2}v;YUc-V(fJp7TA^="><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field></block></value><value name="normalizer"><block type="normalizer" id="r;m/PqEs?X54wLtt;Tse"><field name="range">-1,1</field></block></value></block></value></block></value><next><block type="csv_writer" id="Nib1zjqz75UL19dy~7wb"><field name="writer_uri_var">default</field><value name="writer_input"><block type="denorm" id="\`xf.yM0~dkI:2K7P(www"><field name="axis">x</field><value name="data"><block type="predict" id="bBJWIKsbIWYjninmAEJ-"><field name="predict_model" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field><value name="Shape"><block type="variables_get" id="*bg*GK|*!]~5-wpSD_#o"><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field></block></value></block></value><value name="normalizer"><block type="normalizer" id="={mmi/s|k)04(Ym?l2#~"><field name="range">-1,1</field></block></value></block></value></block></next></block></next></block></next></block></statement></block></xml>`,
          `<xml xmlns="http://www.w3.org/1999/xhtml"><variables><variable type="" id="a#v@N!10;Y3vwEbQpO|E">model1</variable><variable type="" id=".90!~a@Z_,Mh.h1a;vRW">shape1</variable><variable type="" id="H_hXcN*BYLQc:cUVolu2">train1</variable></variables><block type="program" id="C;ToC*@B+}t1.YqJl3x?" x="143" y="-10"><statement name="operation"><block type="variables_set" id=",s42Aomu;O$t9h^m|L$j"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field><value name="VALUE"><block type="supervised_models" id="?EuwhDXHX?|TW!(=d,dV"><field name="type">SVM Regression</field><field name="shape">2,2</field><value name="Config"><block type="text" id="\`d)*Q=S??z;$!CkZ\`hcr"><field name="TEXT"></field></block></value></block></value><next><block type="variables_set" id="6Japhuq;O[^-2,yDuk\`9"><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field><value name="VALUE"><block type="shaper" id="Ui@l9w.1*z,PpP)wEegA"><field name="input columns">*</field><field name="xdimension">1</field><field name="output columns">-1</field><field name="ydimension">1</field><field name="yoffset">0</field><field name="test data">20</field><value name="shaper_xinput_csv"><block type="image_reader" id="iJX5K.7_xbTz=Z?/H2,X"><field name="url">ftp://</field><field name="uri">/</field><value name="Transformers"><block type="lists_create_with" id="eCgII5R?P0jK0EtRf3kO"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="MF]I/ivecMQra]m^5NED"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value><value name="shaper_yinput_csv"><block type="image_reader" id="GL)zz(Y.!4R7|p8Wpb$\{"><field name="url">ftp://</field><field name="uri">/</field><value name="Transformers"><block type="lists_create_with" id="MXP8]DKw80(|-EWQRA=d"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="n,-i|d!!Bz#k-Jx.J(AE"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value></block></value><next><block type="variables_set" id="4HWUZ(\`!+xJ!m0A,I+l1"><field name="VAR" id="H_hXcN*BYLQc:cUVolu2" variabletype="">train1</field><value name="VALUE"><block type="train" id="W6^KH\`99ZJt6(OxE!Bc["><field name="show result">TRUE</field><value name="Model"><block type="variables_get" id="ZCa;xzoZp4~i;Ic|kkA:"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field></block></value><value name="shaper"><block type="norm" id="Ct]}$jcNDLGBFlcZ?31L"><value name="data"><block type="variables_get" id="Gu2}v;YUc-V(fJp7TA^="><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field></block></value><value name="normalizer"><block type="normalizer" id="r;m/PqEs?X54wLtt;Tse"><field name="range">-1,1</field></block></value></block></value></block></value><next><block type="image_writer" id="[59{Xt0r}CLf_oaVWjmx"><field name="writer_uri_var">default</field><field name="imagewriter_regex">*.jpg</field><value name="writer_input"><block type="denorm" id="\`xf.yM0~dkI:2K7P(www"><field name="axis">x</field><value name="data"><block type="predict" id="bBJWIKsbIWYjninmAEJ-"><field name="predict_model" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field><value name="Shape"><block type="variables_get" id="*bg*GK|*!]~5-wpSD_#o"><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field></block></value></block></value><value name="normalizer"><block type="normalizer" id="={mmi/s|k)04(Ym?l2#~"><field name="range">-1,1</field></block></value></block></value></block></next></block></next></block></next></block></statement></block></xml>`,
          `<xml xmlns="http://www.w3.org/1999/xhtml"><variables><variable type="" id="a#v@N!10;Y3vwEbQpO|E">model1</variable><variable type="" id=".90!~a@Z_,Mh.h1a;vRW">shape1</variable><variable type="" id="H_hXcN*BYLQc:cUVolu2">train1</variable></variables><block type="program" id="C;ToC*@B+}t1.YqJl3x?" x="285" y="-475"><statement name="operation"><block type="variables_set" id=",s42Aomu;O$t9h^m|L$j"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field><value name="VALUE"><block type="supervised_models" id="?EuwhDXHX?|TW!(=d,dV"><field name="type">SVM Regression</field><field name="shape">2,2</field><value name="Config"><block type="text" id="\`d)*Q=S??z;$!CkZ\`hcr"><field name="TEXT"></field></block></value></block></value><next><block type="variables_set" id="6Japhuq;O[^-2,yDuk\`9"><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field><value name="VALUE"><block type="shaper" id="Ui@l9w.1*z,PpP)wEegA"><field name="input columns">*</field><field name="xdimension">1</field><field name="output columns">-1</field><field name="ydimension">1</field><field name="yoffset">0</field><field name="test data">20</field><value name="shaper_xinput_csv"><block type="text_reader" id="vw~fb-mg8Iz-xK6d@abG"><field name="url">ftp://</field><field name="uri">/</field><value name="Transformers"><block type="lists_create_with" id="eCgII5R?P0jK0EtRf3kO"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="MF]I/ivecMQra]m^5NED"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value><value name="shaper_yinput_csv"><block type="text_reader" id="gOTu0:]yQUQU9Gtzy-Xx"><field name="url">ftp://</field><field name="uri">/</field><value name="Transformers"><block type="lists_create_with" id="AuLWo,b1nATd~H+BE*D|"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="#tixO76;A8IFe)mlgL~2"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value></block></value><next><block type="variables_set" id="4HWUZ(\`!+xJ!m0A,I+l1"><field name="VAR" id="H_hXcN*BYLQc:cUVolu2" variabletype="">train1</field><value name="VALUE"><block type="train" id="W6^KH\`99ZJt6(OxE!Bc["><field name="show result">TRUE</field><value name="Model"><block type="variables_get" id="ZCa;xzoZp4~i;Ic|kkA:"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field></block></value><value name="shaper"><block type="variables_get" id="Gu2}v;YUc-V(fJp7TA^="><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field></block></value></block></value><next><block type="text_writer" id=";;(Woe:.:xwe;5~Qq##T"><field name="writer_uri_var">default</field><value name="textwriter_input"><block type="predict" id="bBJWIKsbIWYjninmAEJ-"><field name="predict_model" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field><value name="Shape"><block type="variables_get" id="*bg*GK|*!]~5-wpSD_#o"><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field></block></value></block></value></block></next></block></next></block></next></block></statement></block></xml>`,
          `<xml xmlns="http://www.w3.org/1999/xhtml"><variables><variable type="" id="a#v@N!10;Y3vwEbQpO|E">model1</variable><variable type="" id=".90!~a@Z_,Mh.h1a;vRW">shape1</variable><variable type="" id="H_hXcN*BYLQc:cUVolu2">train1</variable></variables><block type="program" id="C;ToC*@B+}t1.YqJl3x?" x="105" y="-864"><statement name="operation"><block type="variables_set" id=",s42Aomu;O$t9h^m|L$j"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field><value name="VALUE"><block type="supervised_models" id="?EuwhDXHX?|TW!(=d,dV"><field name="type">SVM Regression</field><field name="shape">2,2</field><value name="Config"><block type="text" id="\`d)*Q=S??z;$!CkZ\`hcr"><field name="TEXT"></field></block></value></block></value><next><block type="variables_set" id="6Japhuq;O[^-2,yDuk\`9"><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field><value name="VALUE"><block type="shaper" id="Ui@l9w.1*z,PpP)wEegA"><field name="input columns">*</field><field name="xdimension">1</field><field name="output columns">-1</field><field name="ydimension">1</field><field name="yoffset">0</field><field name="test data">20</field><value name="shaper_xinput_csv"><block type="text_reader" id="vw~fb-mg8Iz-xK6d@abG"><field name="url">ftp://</field><field name="uri">/</field><value name="Transformers"><block type="lists_create_with" id="eCgII5R?P0jK0EtRf3kO"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="MF]I/ivecMQra]m^5NED"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value><value name="shaper_yinput_csv"><block type="text_reader" id="gOTu0:]yQUQU9Gtzy-Xx"><field name="url">ftp://</field><field name="uri">/</field><value name="Transformers"><block type="lists_create_with" id="AuLWo,b1nATd~H+BE*D|"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="#tixO76;A8IFe)mlgL~2"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value></block></value><next><block type="variables_set" id="4HWUZ(\`!+xJ!m0A,I+l1"><field name="VAR" id="H_hXcN*BYLQc:cUVolu2" variabletype="">train1</field><value name="VALUE"><block type="train" id="W6^KH\`99ZJt6(OxE!Bc["><field name="show result">TRUE</field><value name="Model"><block type="variables_get" id="ZCa;xzoZp4~i;Ic|kkA:"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field></block></value><value name="shaper"><block type="variables_get" id="Gu2}v;YUc-V(fJp7TA^="><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field></block></value></block></value><next><block type="model_writer" id="2$;KvbiwPnL~DCXs-M#B"><field name="writer_uri_var">default</field><field name="imagewriter_regex">*.jpg</field><value name="writer_input"><block type="variables_get" id="^kKvg?heXVJDJ6R-%CRS"><field name="VAR" id="H_hXcN*BYLQc:cUVolu2" variabletype="">train1</field></block></value></block></next></block></next></block></next></block></statement></block></xml>`,
          `<xml xmlns="http://www.w3.org/1999/xhtml"><variables><variable type="" id="a#v@N!10;Y3vwEbQpO|E">model1</variable><variable type="" id=".90!~a@Z_,Mh.h1a;vRW">shape1</variable><variable type="" id="H_hXcN*BYLQc:cUVolu2">train1</variable></variables><block type="program" id="C;ToC*@B+}t1.YqJl3x?" x="105" y="-864"><statement name="operation"><block type="variables_set" id=",s42Aomu;O$t9h^m|L$j"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field><value name="VALUE"><block type="supervised_models" id="?EuwhDXHX?|TW!(=d,dV"><field name="type">SVM Regression</field><field name="shape">2,2</field><value name="Config"><block type="text" id="\`d)*Q=S??z;$!CkZ\`hcr"><field name="TEXT"></field></block></value></block></value><next><block type="variables_set" id="6Japhuq;O[^-2,yDuk\`9"><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field><value name="VALUE"><block type="shaper" id="Ui@l9w.1*z,PpP)wEegA"><field name="input columns">*</field><field name="xdimension">1</field><field name="output columns">-1</field><field name="ydimension">1</field><field name="yoffset">0</field><field name="test data">20</field><value name="shaper_xinput_csv"><block type="image_reader" id="|oT8P=Nda{-TMTim8h$D"><field name="url">ftp://</field><field name="uri">/</field><value name="Transformers"><block type="lists_create_with" id="eCgII5R?P0jK0EtRf3kO"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="MF]I/ivecMQra]m^5NED"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value><value name="shaper_yinput_csv"><block type="image_reader" id="C(F*xL|6nh=1djd9GrU6"><field name="url">ftp://</field><field name="uri">/</field><value name="Transformers"><block type="lists_create_with" id="Xf_tn91Ph_scRJnn8;8$"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="\`8HCYG+yF:g89b*]EI.3"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value></block></value><next><block type="variables_set" id="4HWUZ(\`!+xJ!m0A,I+l1"><field name="VAR" id="H_hXcN*BYLQc:cUVolu2" variabletype="">train1</field><value name="VALUE"><block type="train" id="W6^KH\`99ZJt6(OxE!Bc["><field name="show result">TRUE</field><value name="Model"><block type="variables_get" id="ZCa;xzoZp4~i;Ic|kkA:"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field></block></value><value name="shaper"><block type="variables_get" id="Gu2}v;YUc-V(fJp7TA^="><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field></block></value></block></value><next><block type="model_writer" id="2$;KvbiwPnL~DCXs-M#B"><field name="writer_uri_var">default</field><field name="imagewriter_regex">*.jpg</field><value name="writer_input"><block type="variables_get" id="^kKvg?heXVJDJ6R-%CRS"><field name="VAR" id="H_hXcN*BYLQc:cUVolu2" variabletype="">train1</field></block></value></block></next></block></next></block></next></block></statement></block></xml>`,
          `<xml xmlns="http://www.w3.org/1999/xhtml"><variables><variable type="" id="a#v@N!10;Y3vwEbQpO|E">model1</variable><variable type="" id=".90!~a@Z_,Mh.h1a;vRW">shape1</variable><variable type="" id="H_hXcN*BYLQc:cUVolu2">train1</variable></variables><block type="program" id="C;ToC*@B+}t1.YqJl3x?" x="105" y="-864"><statement name="operation"><block type="variables_set" id=",s42Aomu;O$t9h^m|L$j"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field><value name="VALUE"><block type="supervised_models" id="?EuwhDXHX?|TW!(=d,dV"><field name="type">SVM Regression</field><field name="shape">2,2</field><value name="Config"><block type="text" id="\`d)*Q=S??z;$!CkZ\`hcr"><field name="TEXT"></field></block></value></block></value><next><block type="variables_set" id="6Japhuq;O[^-2,yDuk\`9"><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field><value name="VALUE"><block type="shaper" id="Ui@l9w.1*z,PpP)wEegA"><field name="input columns">*</field><field name="xdimension">1</field><field name="output columns">-1</field><field name="ydimension">1</field><field name="yoffset">0</field><field name="test data">20</field><value name="shaper_xinput_csv"><block type="norm" id="h_fU?%LG(;*qfb06wFT3"><value name="data"><block type="csv_reader" id="@bk*IiXuM{mm[=3QRo;;"><field name="url">ftp://</field><field name="uri">/</field><field name="config">default</field><field name="streamType">csv</field><field name="columns"></field><field name="selection">head</field><field name="number of rows">5</field><value name="Transformers"><block type="lists_create_with" id="eCgII5R?P0jK0EtRf3kO"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="MF]I/ivecMQra]m^5NED"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value><value name="normalizer"><block type="normalizer" id="zEbB$aDh$CU{z(-_;8=,"><field name="range">-1,1</field></block></value></block></value><value name="shaper_yinput_csv"><block type="norm" id="4:)(CG/6mo2eGxaa)Z@n"><value name="data"><block type="csv_reader" id="X4La}w^hMFGyxA+tZf[S"><field name="url">ftp://</field><field name="uri">/</field><field name="config">default</field><field name="streamType">csv</field><field name="columns"></field><field name="selection">head</field><field name="number of rows">5</field><value name="Transformers"><block type="lists_create_with" id="8Y7,W/JMA)f|$o,6q1eu"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="MfMGc3z!UO3=*U43.H#*"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value><value name="normalizer"><block type="normalizer" id="DBq.n|)wC_ktYqUikoQ["><field name="range">-1,1</field></block></value></block></value></block></value><next><block type="variables_set" id="4HWUZ(\`!+xJ!m0A,I+l1"><field name="VAR" id="H_hXcN*BYLQc:cUVolu2" variabletype="">train1</field><value name="VALUE"><block type="train" id="W6^KH\`99ZJt6(OxE!Bc["><field name="show result">TRUE</field><value name="Model"><block type="variables_get" id="ZCa;xzoZp4~i;Ic|kkA:"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field></block></value><value name="shaper"><block type="variables_get" id="Gu2}v;YUc-V(fJp7TA^="><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field></block></value></block></value><next><block type="model_writer" id="2$;KvbiwPnL~DCXs-M#B"><field name="writer_uri_var">default</field><field name="imagewriter_regex">*.jpg</field><value name="writer_input"><block type="variables_get" id="^kKvg?heXVJDJ6R-%CRS"><field name="VAR" id="H_hXcN*BYLQc:cUVolu2" variabletype="">train1</field></block></value></block></next></block></next></block></next></block></statement></block></xml>`,
          `<xml xmlns="http://www.w3.org/1999/xhtml"><variables><variable type="" id="a#v@N!10;Y3vwEbQpO|E">model1</variable></variables><block type="program" id="C;ToC*@B+}t1.YqJl3x?" x="105" y="-864"><statement name="operation"><block type="variables_set" id="GTFGEtNp=O8v:-5ijOeR"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field><value name="VALUE"><block type="model_reader" id="@C4;VWuJ3tW33p+qp3jI"><field name="url">ftp://</field></block></value><next><block type="csv_writer" id="R\`,M~Ot{k:#y8uEl)~!A"><field name="writer_uri_var">default</field><value name="writer_input"><block type="denorm" id="8DTYmxqWuLt{--58*62)"><field name="axis">x</field><value name="data"><block type="predict" id="5j)-)Vhl45J~Jys)$N$G"><field name="predict_model" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field><value name="Shape"><block type="csv_reader" id="JIv(*60[Of:sd=:|5j(?"><field name="url">ftp://</field><field name="uri">/</field><field name="config">default</field><field name="streamType">csv</field><field name="columns"></field><field name="selection">head</field><field name="number of rows">5</field><value name="Transformers"><block type="lists_create_with" id=",--yk3wAG}@)P-;855qp"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="=0}A#~%Jjp?hI9mGv/bt"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value></block></value><value name="normalizer"><block type="normalizer" id="6x_mQF;n*8Kr(T_Vqu0k"><field name="range">-1,1</field></block></value></block></value></block></next></block></statement></block></xml>`,
          `<xml xmlns="http://www.w3.org/1999/xhtml"><variables><variable type="" id="a#v@N!10;Y3vwEbQpO|E">model1</variable></variables><block type="program" id="C;ToC*@B+}t1.YqJl3x?" x="105" y="-864"><statement name="operation"><block type="variables_set" id="GTFGEtNp=O8v:-5ijOeR"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field><value name="VALUE"><block type="model_reader" id="@C4;VWuJ3tW33p+qp3jI"><field name="url">ftp://</field></block></value><next><block type="image_writer" id="+*fyudo_X$:[5Rb6Or|5"><field name="writer_uri_var">default</field><field name="imagewriter_regex">*.jpg</field><value name="writer_input"><block type="predict" id="5j)-)Vhl45J~Jys)$N$G"><field name="predict_model" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field><value name="Shape"><block type="image_reader" id=";n~-g*cYg7*ZxsHS__~c"><field name="url">ftp://</field><field name="uri">/</field><value name="Transformers"><block type="lists_create_with" id=",--yk3wAG}@)P-;855qp"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="=0}A#~%Jjp?hI9mGv/bt"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value></block></value></block></next></block></statement></block></xml>`,
          `<xml xmlns="http://www.w3.org/1999/xhtml"><variables><variable type="" id="a#v@N!10;Y3vwEbQpO|E">model1</variable></variables><block type="program" id="C;ToC*@B+}t1.YqJl3x?" x="105" y="-864"><statement name="operation"><block type="variables_set" id="GTFGEtNp=O8v:-5ijOeR"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field><value name="VALUE"><block type="model_reader" id="@C4;VWuJ3tW33p+qp3jI"><field name="url">ftp://</field></block></value><next><block type="text_writer" id="IOzwLLXAXk\`XB3D[bBE2"><field name="writer_uri_var">default</field><value name="textwriter_input"><block type="predict" id="5j)-)Vhl45J~Jys)$N$G"><field name="predict_model" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field><value name="Shape"><block type="text_reader" id="^JJ+hO:??XD_mB:umuS]"><field name="url">ftp://</field><field name="uri">/</field><value name="Transformers"><block type="lists_create_with" id=",--yk3wAG}@)P-;855qp"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="=0}A#~%Jjp?hI9mGv/bt"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value></block></value></block></next></block></statement></block></xml>`,
          ``,
          `<xml xmlns="http://www.w3.org/1999/xhtml"><variables><variable type="" id="|)KPO[:m9cahjH%wg$s]">images</variable><variable type="" id="a#v@N!10;Y3vwEbQpO|E">result</variable></variables><block type="program" id="C;ToC*@B+}t1.YqJl3x?" x="105" y="-864"><statement name="operation"><block type="variables_set" id="yYkn@e@|3+c@LOm_LTUi"><field name="VAR" id="|)KPO[:m9cahjH%wg$s]" variabletype="">images</field><value name="VALUE"><block type="image_reader" id=";n~-g*cYg7*ZxsHS__~c"><field name="url">ftp://</field><field name="uri">/</field><value name="Transformers"><block type="lists_create_with" id=",--yk3wAG}@)P-;855qp"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="=0}A#~%Jjp?hI9mGv/bt"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value><next><block type="variables_set" id="dMyE|sCK~@W3=#b:Q+=A"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">result</field><value name="VALUE"><block type="unsupervised_models" id="pa/~dUf^+p47?S/%Yt33"><field name="type">DLib Image Clustering</field><field name="shape">2,2</field><value name="Config"><block type="text" id="z.}3oiP}=U0NUZieP7l("><field name="TEXT">{"threshold":0.5}</field></block></value><value name="input"><block type="image_transformer" id="M,7Q+RlT^5Dd9,ir)Hmi"><value name="input"><block type="variables_get" id="O$r%)1mvXOpKXBr[2.Zu"><field name="VAR" id="|)KPO[:m9cahjH%wg$s]" variabletype="">images</field></block></value><value name="config"><block type="text" id="e~qQv@w0O+PY]jZ?!Wrm"><field name="TEXT"></field></block></value></block></value></block></value><next><block type="image_writer" id="+*fyudo_X$:[5Rb6Or|5"><field name="writer_uri_var">default</field><field name="imagewriter_regex">*.jpg</field><value name="writer_input"><block type="variables_get" id="DdIeYroWk6.qz]W-\`57D"><field name="VAR" id="|)KPO[:m9cahjH%wg$s]" variabletype="">images</field></block></value><value name="result"><block type="variables_get" id="8u@Oh|Y6G;86xzFj.J?v"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">result</field></block></value></block></next></block></next></block></statement></block></xml>`,
          ``
          ]
      return function(event) {
        const result = _.attributes.watch.value.split(' ')
          .map((e) => e + ":" + document.getElementById(e)[_.attributes.query.value])
        console.log(result)
        _.bb.attachBlock()

        let xml_text = 0;
        switch (result.toString()){
            case 'tech:super-lp,process:csv':
                xml_text=0;
                break;
            case 'tech:super-lp,process:image':
                xml_text=1;
                break;
            case 'tech:super-lp,process:text':
                xml_text=2;
                break;
            case 'tech:super-l,process:text':
                xml_text=3;
                break;
            case 'tech:super-l,process:image':
                xml_text=4;
                break;
            case 'tech:super-l,process:csv':
                xml_text=5;
                break;
            case 'tech:super-p,process:csv':
                xml_text=6;
                break;
            case 'tech:super-p,process:image':
                xml_text=7;
                break;
            case 'tech:super-p,process:text':
                xml_text=8;
                break;
            case 'tech:un-super,process:text':
                xml_text=9;
                break;
            case 'tech:un-super,process:image':
                xml_text=10;
                break;
            case 'tech:un-super,process:csv':
                xml_text=11;
                break;
        }
        const xml = Blockly.Xml.textToDom(xml_texts[xml_text]);
        Blockly.Xml.domToWorkspace(xml, _.bb.workspace);
        _.shadowRoot.firstElementChild.innerText = "Get code";
        _.button.onclick = toggle()
      }
    }
  }



  connectedCallback(){
    let _ = this;
    _.shadowRoot.appendChild(
        this.template.content.cloneNode(true));
    _.button = _.shadowRoot.querySelector('button');
    _.bb = document.getElementById(_.attributes.update.value.split(" ")[0])
    //_.bb.ready=function(){

   // }

    const toggle = function (){
      const editor = document.getElementById('pyeditor');
      const bb = _.bb;
      let showCode = function () {
        bb.hidden = true;
        editor.showcode(bb.getCode())
        editor.hidden = ""
        _.shadowRoot.firstElementChild.innerText="show blocks";
        _.button.onclick =showBlock
      }
      let showBlock = function () {
        bb.hidden = '';
        editor.showcode('')
        editor.hidden = "true"
        _.shadowRoot.firstElementChild.innerText="show code";
        _.button.onclick =showCode
      }
      let flag = 1;
      return function (){
        return showCode
      }
    }
    _.button.onclick = _.loadBlocks(toggle())
  }


    drawWorkspace(workspace, xml_text) {
    const xml = Blockly.Xml.textToDom(xml_text);
    workspace.clear()
    Blockly.Xml.domToWorkspace(xml, workspace);
    }


  changeModel(change) {
  let _ = this
  let config = 'test fail'
    switch(change.newValue){
        case 'SVM Classification':
            config = 'test success'
            break;
    }
    let xml_text = `<xml xmlns="http://www.w3.org/1999/xhtml"><variables><variable type="" id="a#v@N!10;Y3vwEbQpO|E">model1</variable><variable type="" id=".90!~a@Z_,Mh.h1a;vRW">shape1</variable><variable type="" id="H_hXcN*BYLQc:cUVolu2">train1</variable></variables><block type="program" id="C;ToC*@B+}t1.YqJl3x?" x="585" y="-143"><statement name="operation"><block type="variables_set" id=",s42Aomu;O$t9h^m|L$j"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field><value name="VALUE"><block type="supervised_models" id="?EuwhDXHX?|TW!(=d,dV"><field name="model">KNN Classifier</field><field name="shape">2,2</field><value name="Config"><block type="text" id="\`d)*Q=S??z;$!CkZ\`hcr"><field name="TEXT">{"testing":3, "blah":"blah blah"}</field></block></value></block></value><next><block type="variables_set" id="6Japhuq;O[^-2,yDuk\`9"><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field><value name="VALUE"><block type="shaper" id="Ui@l9w.1*z,PpP)wEegA"><field name="input columns">*</field><field name="xdimension">1</field><field name="output columns">-1</field><field name="ydimension">1</field><field name="yoffset">0</field><field name="test data">20</field><value name="shaper_xinput_csv"><block type="csv_reader" id="Dwpnj%vfUw-a#KbA[E;M"><field name="url">ftp://</field><field name="uri">/</field><field name="config">default</field><field name="streamType">csv</field><field name="columns"></field><field name="selection">full</field><field name="number of rows">5</field><value name="Transformers"><block type="lists_create_with" id="eCgII5R?P0jK0EtRf3kO"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="MF]I/ivecMQra]m^5NED"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value><value name="shaper_yinput_csv"><block type="csv_reader" id="a3ZNg9k5?sqOB9AQBF;L"><field name="url">ftp://</field><field name="uri">/</field><field name="config">default</field><field name="streamType">csv</field><field name="columns"></field><field name="selection">full</field><field name="number of rows">5</field><value name="Transformers"><block type="lists_create_with" id="N/%jc:?R^+lW7lZ?1wMs"><mutation items="1"></mutation><value name="ADD0"><block type="transformer" id="\`1=[~_o5,JB2Rhr3n\`Ek"><field name="column">0</field><field name="function">plus1</field></block></value></block></value></block></value></block></value><next><block type="variables_set" id="4HWUZ(\`!+xJ!m0A,I+l1"><field name="VAR" id="H_hXcN*BYLQc:cUVolu2" variabletype="">train1</field><value name="VALUE"><block type="train" id="W6^KH\`99ZJt6(OxE!Bc["><field name="show result">TRUE</field><value name="Model"><block type="variables_get" id="ZCa;xzoZp4~i;Ic|kkA:"><field name="VAR" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field></block></value><value name="shaper"><block type="norm" id="Ct]}$jcNDLGBFlcZ?31L"><value name="data"><block type="variables_get" id="Gu2}v;YUc-V(fJp7TA^="><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field></block></value><value name="normalizer"><block type="normalizer" id="r;m/PqEs?X54wLtt;Tse"><field name="range">-1,1</field></block></value></block></value></block></value><next><block type="csv_writer" id="Nib1zjqz75UL19dy~7wb"><field name="writer_uri_var">default</field><value name="writer_input"><block type="denorm" id="\`xf.yM0~dkI:2K7P(www"><field name="axis">x</field><value name="data"><block type="predict" id="bBJWIKsbIWYjninmAEJ-"><field name="predict_model" id="a#v@N!10;Y3vwEbQpO|E" variabletype="">model1</field><value name="Shape"><block type="variables_get" id="*bg*GK|*!]~5-wpSD_#o"><field name="VAR" id=".90!~a@Z_,Mh.h1a;vRW" variabletype="">shape1</field></block></value></block></value><value name="normalizer"><block type="normalizer" id="={mmi/s|k)04(Ym?l2#~"><field name="range">-1,1</field></block></value></block></value></block></next></block></next></block></next></block></statement></block></xml>`
    _.drawWorkspace(_.bb.workspace, xml_text)
  }
});
</script>
